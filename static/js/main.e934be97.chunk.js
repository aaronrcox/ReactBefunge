(this.webpackJsonpReactBefunge=this.webpackJsonpReactBefunge||[]).push([[0],{45:function(e,t,n){e.exports=n(58)},50:function(e,t,n){},51:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"NO_OP",(function(){return f})),n.d(r,"SETUP_GRID",(function(){return x})),n.d(r,"INITIALISE_GRID",(function(){return p})),n.d(r,"MOUSE_MOVED",(function(){return v})),n.d(r,"MOUSE_DOWN",(function(){return I})),n.d(r,"MOUSE_UP",(function(){return g})),n.d(r,"SCROLL_VIEW",(function(){return h})),n.d(r,"DRAG",(function(){return w})),n.d(r,"KEY_DOWN",(function(){return y})),n.d(r,"SET_HOVER_CELL",(function(){return O})),n.d(r,"SET_CELL_VALUE",(function(){return b})),n.d(r,"SET_TARGET_CELL",(function(){return j})),n.d(r,"MOVE_TARGET_CELL",(function(){return E})),n.d(r,"INSERT_ROW",(function(){return m})),n.d(r,"INSERT_COL",(function(){return D})),n.d(r,"DELETE_ROW",(function(){return T})),n.d(r,"DELETE_COL",(function(){return C})),n.d(r,"SET_SELECTION_AREA",(function(){return R})),n.d(r,"CLEAR_SELECTION_AREA",(function(){return S})),n.d(r,"SET_TYPEING_DIRECTION",(function(){return M})),n.d(r,"none",(function(){return G})),n.d(r,"setupGrid",(function(){return _})),n.d(r,"initialiseGrid",(function(){return k})),n.d(r,"mouseMoved",(function(){return A})),n.d(r,"mouseDown",(function(){return L})),n.d(r,"mouseUp",(function(){return W})),n.d(r,"scrollView",(function(){return N})),n.d(r,"drag",(function(){return H})),n.d(r,"keyDown",(function(){return U})),n.d(r,"setHoverCell",(function(){return Y})),n.d(r,"setCellValue",(function(){return V})),n.d(r,"setTargetCell",(function(){return B})),n.d(r,"moveTargetCell",(function(){return K})),n.d(r,"setSelectionArea",(function(){return X})),n.d(r,"clearSelectionArea",(function(){return P})),n.d(r,"insertRow",(function(){return J})),n.d(r,"insertCol",(function(){return q})),n.d(r,"deleteRow",(function(){return z})),n.d(r,"deleteCol",(function(){return $})),n.d(r,"setTypeingDir",(function(){return F}));var o=n(0),l=n.n(o),a=n(19),c=n.n(a),i=(n(50),n(51),n(4)),u=n(17),d=n(60),s=n(1),f="[TextGrid] NO Op",x="[TextGrid] Setup",p="[TextGrid] Initialise",v="[TextGrid] MouseMoved",I="[TextGrid] Mouse Pressed",g="[TextGrid] Mouse Released",h="[TextGrid] Scroll View",w="[TextGrid] Drag",y="[TextGrid] Key Down",O="[TextGrid] Set Hover Cell",b="[TextGrid] Set Cell Text",j="[TextGrid] Set Target Cell",E="[TextGrid] Move Target Cell",m="[TextGrid] Insert Row",D="[TextGrid] Insert Col",T="[TextGrid] Delete Row",C="[TextGrid] Delete Col",R="[TextGrid] Set Selection Area",S="[TextGrid] Clear Selection",M="[TextGrid] Set Text Direction";function G(){return{type:f}}function _(e,t,n,r,o){return{type:x,payload:{width:e,height:t,text:n,cellWidth:r,cellHeight:o}}}function k(e){return{type:p,payload:e}}function A(e){return{type:v,payload:e}}function L(){return{type:I}}function W(){return{type:g}}function N(e,t){return{type:h,payload:{xOffset:e,yOffset:t}}}function H(){return{type:w}}function U(e){return{type:y,payload:e}}function Y(e){return{type:O,payload:e}}function V(e){return{type:b,payload:e}}function B(e){return{type:j,payload:e}}function K(e,t,n){return{type:E,payload:{x:e,y:t,invert:n}}}function X(e){return{type:R,payload:e}}function P(e){return{type:S}}function J(e){return{type:m,payload:{rowIndex:e}}}function q(e,t){return{type:D,payload:{rowIndex:e,colIndex:t}}}function z(e){return{type:T,payload:{rowIndex:e}}}function $(e,t){return{type:C,payload:{rowIndex:e,colIndex:t}}}function F(e,t){return{type:M,payload:{x:e,y:t}}}var Q={cellWidth:24,cellHeight:24,rows:0,cols:0,cells:[],insertMode:!1,viewport:{rows:0,cols:0,xOffset:0,yOffset:0},hover:{rowIndex:-1,colIndex:-1,cellIndex:-1},target:{rowIndex:-1,colIndex:-1,cellIndex:-1,dir:{x:1,y:0}},selection:{isMouseDown:!1,isDragging:!1,startRowIndex:0,startColIndex:0,endRowIndex:0,endColIndex:0},selectedCells:[]};var Z=n(12),ee=n(43),te=n(61),ne=n(42),re=Object(te.a)((function(e,t){return e.pipe(Object(ee.a)(x),Object(ne.a)((function(e){console.log(e);var n=e.payload.width,r=e.payload.height,o=e.payload.text,l=e.payload.cellWidth||t.value.cellWidth,a=e.payload.cellHeight||t.value.cellHeight,c=Math.floor(r/(a-1))+1,i=Math.floor(n/(l-1))+1,u=Object(s.a)({},t.value.viewport,{rows:c,cols:i});return[k({cellWidth:l,cellHeight:a,rows:c,cols:i,cells:o.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/).map((function(e){return e.split("")})),viewport:u})]})))}),(function(e,t){return e.pipe(Object(ee.a)(v),Object(ne.a)((function(e){var n=e.payload.mouseX,r=e.payload.mouseY,o=t.value.cellWidth-1,l=t.value.cellHeight-1,a=t.value.viewport,c=Math.floor(r/l)+a.yOffset,i=Math.floor(n/o)+a.xOffset,u=c*t.value.cols+i,d={rowIndex:c,colIndex:i,cellIndex:u},s=[];return u!==t.value.hover.cellIndex&&s.push(Y(d)),t.value.selection.isMouseDown&&s.push(H()),s})))}),(function(e,t){return e.pipe(Object(ee.a)(y),Object(ne.a)((function(e){var n=e.payload.key,r=t.value.target.rowIndex,o=t.value.target.colIndex,l=e.payload.isShiftDown,a=e.payload.callback(t.value,n)||{},c=a.actions||[];if(a.preventDefault)return c;if(1===n.length)return[].concat(Object(Z.a)(c),[V({rowIndex:r,colIndex:o,value:n}),K()]);if("Tab"===n){var i=l?-1:1;return[].concat(Object(Z.a)(c),[K(i,0)])}if("Enter"===n){var u=l?-1:1;return[].concat(Object(Z.a)(c),[K(0,u)])}if("Backspace"===n)return[].concat(Object(Z.a)(c),[P(),V({value:""}),K(void 0,void 0,!0)]);if("Delete"===n)return[].concat(Object(Z.a)(c),[P(),V({rowIndex:r,colIndex:o,value:""})]);if(n.includes("Arrow")){var d={x:0,y:0};switch(n){case"ArrowLeft":d.x=-1;break;case"ArrowRight":d.x=1;break;case"ArrowUp":d.y=-1;break;case"ArrowDown":d.y=1}if(l){var f=Object(s.a)({},t.value.selection);Object(s.a)({},t.value.target);return f.endColIndex+=d.x,f.endRowIndex+=d.y,[].concat(Object(Z.a)(c),[X(f),F(d.x,d.y)])}return[].concat(Object(Z.a)(c),[K(d.x,d.y),F(d.x,d.y)])}return[]})))})),oe=Object(d.a)(),le=Object(u.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(s.a)({},e,{},t.payload);case O:return Object(s.a)({},e,{hover:t.payload});case b:var n=t.payload.rowIndex?t.payload.rowIndex:e.target.rowIndex,r=t.payload.colIndex?t.payload.colIndex:e.target.colIndex,o=t.payload.value,l=e.cells;return function(e,t,n){for(;e.length<=n;)e.push([]);for(;e[n].length<=t;)e[n].push("")}(l,r,n),l[n][r]=o,Object(s.a)({},e,{cells:l});case j:var a=Object(s.a)({},e.target,{},t.payload),c=Object(s.a)({},e.selection,{startRowIndex:a.rowIndex,startColIndex:a.colIndex,endRowIndex:a.rowIndex,endColIndex:a.colIndex});return Object(s.a)({},e,{target:a,selection:c});case E:var i=t.payload.invert?-1:1,u=t.payload&&void 0!==t.payload.x?t.payload.x:e.target.dir.x,d=t.payload&&void 0!==t.payload.y?t.payload.y:e.target.dir.y,f=Object(s.a)({},e.target,{},function(e,t,n,r){var o=e.cols,l=t.rowIndex+r,a=t.colIndex+n;return l=Math.max(l,0),a=Math.max(a,0),{rowIndex:l,colIndex:a,cellIndex:l*o+a}}(e,e.target,u*i,d*i)),x=Object(s.a)({},e.selection,{startRowIndex:f.rowIndex,startColIndex:f.colIndex,endRowIndex:f.rowIndex,endColIndex:f.colIndex});return Object(s.a)({},e,{target:f,selection:x});case m:var v=t.payload.rowIndex,y=e.cells;return y.splice(v,0,[]),Object(s.a)({},e,{cells:y});case D:for(var G=t.payload,_=G.rowIndex,k=G.colIndex,A=e.cells;A.length<=_;)A.push([]);for(;A[_].length<=k;)A[_].push("");return A[_].splice(k,0,""),Object(s.a)({},e,{cells:A});case T:var L=t.payload.rowIndex,W=e.cells;return W.splice(L,1),Object(s.a)({},e,{cells:W});case C:console.log(C);var N=t.payload,H=N.rowIndex,U=N.colIndex,Y=e.cells;return Y.length<=H?e:Y[H].length<=U?e:(Y[H].splice(U,1),Object(s.a)({},e,{cells:Y}));case R:var V=Object(s.a)({},e.selection,{},t.payload),B=Object(s.a)({},e.target,{rowIndex:V.endRowIndex,colIndex:V.endColIndex,cellIndex:V.endRowIndex*e.cols+V.endColIndex});return Object(s.a)({},e,{selection:V,target:B});case S:for(var K=e.cells,X=Math.min(e.selection.startRowIndex,e.selection.endRowIndex),P=Math.max(e.selection.startRowIndex,e.selection.endRowIndex),J=Math.min(e.selection.startColIndex,e.selection.endColIndex),q=Math.max(e.selection.startColIndex,e.selection.endColIndex),z=X;z<=P&&z<K.length;z++)for(var $=J;$<=q&&$<K[z].length;$++)K[z][$]="";return Object(s.a)({},e,{cells:K});case I:var F=Object(s.a)({},e.target,{rowIndex:e.hover.rowIndex,colIndex:e.hover.colIndex,cellIndex:e.hover.cellIndex}),Z=Object(s.a)({},e.selection,{startColIndex:F.colIndex,startRowIndex:F.rowIndex,endColIndex:F.colIndex,endRowIndex:F.rowIndex,isDragging:!1,isMouseDown:!0});return Object(s.a)({},e,{target:F,selection:Z});case g:var ee=Object(s.a)({},e.selection,{isDragging:!1,isMouseDown:!1});return Object(s.a)({},e,{selection:ee});case h:var te=t.payload,ne=te.xOffset,re=te.yOffset,oe=Object(s.a)({},e.viewport,{xOffset:Math.floor(ne/e.cellWidth),yOffset:Math.floor(re/e.cellHeight)});return Object(s.a)({},e,{viewport:oe});case w:if(e.selection.isDragging){var le=Object(s.a)({},e.selection);le.endRowIndex=e.hover.rowIndex,le.endColIndex=e.hover.colIndex,le.endColIndex+=le.endColIndex<le.startColIndex?0:1;var ae=Object(s.a)({},e.target,{rowIndex:e.hover.rowIndex,colIndex:e.hover.colIndex,cellIndex:e.hover.cellIndex});return Object(s.a)({},e,{selection:le,target:ae})}var ce=Object(s.a)({},e.target,{rowIndex:e.hover.rowIndex,colIndex:e.hover.colIndex,cellIndex:e.hover.cellIndex}),ie=Object(s.a)({},e.selection,{isDragging:!0});return Object(s.a)({},e,{selection:ie,target:ce});case M:var ue=Object(s.a)({},e.target);return ue.dir=Object(s.a)({},t.payload),Object(s.a)({},e,{target:ue});default:return e}}),Object(u.a)(oe));oe.run(re);var ae=n(40),ce=n(35);n(57);function ie(e){var t=Object(i.b)(),n=Object(i.c)((function(e){return e.viewport})),r=n.rows>0?new Array(n.rows).fill(""):[],a=Object(o.useRef)(null);Object(o.useEffect)((function(){var n=a.current?a.current.offsetWidth:0,r=a.current?a.current.offsetHeight:0;t(_(n,r,e.config.text,e.config.cellWidth,e.config.cellHeight))}),[e,t]);return l.a.createElement("div",{ref:a,className:"text-grid-area",onScroll:function(e){e.preventDefault(),t(N(e.target.scrollLeft,e.target.scrollTop))},draggable:!0,tabIndex:"0",onKeyDown:function(n){n.preventDefault(),t(U({key:n.key,isShiftDown:n.shiftKey,callback:e.config.events.onKeyDown}))},onMouseMove:function(e){var n=e.currentTarget.getBoundingClientRect(),r=e.clientX-n.left,o=e.clientY-n.top;t(A({mouseX:r,mouseY:o}))},onMouseUp:function(e){e.preventDefault(),t(W())},onMouseDown:function(e){e.preventDefault(),e.currentTarget.focus(),t(L())}},l.a.createElement("div",{className:"text-grid"},r.map((function(e,t){return l.a.createElement(ue,{key:"gridRow-".concat(t),rowId:t+n.yOffset})})),l.a.createElement(se,null)),l.a.createElement("div",{style:{width:1e4,height:1e4,position:"absolute"}}))}function ue(e){var t=e.rowId,n=Object(i.c)((function(e){return e.cellHeight})),r=Object(i.c)((function(e){return e.viewport})),o=Object(i.c)((function(e){return e.cols})),a=r.cols>0?new Array(r.cols).fill(""):[];return l.a.createElement("div",{className:"text-grid-row",style:{height:n,maxHeight:n,minHeight:n}},a.map((function(e,n){var a=n+r.xOffset,c=t*o+a;return l.a.createElement(de,{key:"cell-"+a,rowId:t,colId:a,cellId:c})})))}function de(e){var t=e.rowId,n=e.colId,r=(e.cellId,Object(i.c)((function(e){return t<e.cells.length&&n<e.cells[t].length?e.cells[t][n]:""}))),o=Object(i.c)((function(e){return e.cellWidth})),a=Object(i.c)((function(e){return e.hover.rowIndex===t})),c=Object(i.c)((function(e){return e.hover.colIndex===n})),u=Object(i.c)((function(e){return e.target.dir.x})),d=Object(i.c)((function(e){return e.target.dir.y})),s=a&&c,f=Object(i.c)((function(e){return e.target.rowIndex===t&&e.target.colIndex===n}));return l.a.createElement("span",{className:function(){var e=["text-grid-cell"];return s&&e.push("cell-hover"),a&&e.push("row-hover"),c&&e.push("col-hover"),f&&e.push("active-override"),f&&u>0&&e.push("active-override-left"),f&&u<0&&e.push("active-override-right"),f&&d>0&&e.push("active-override-top"),f&&d<0&&e.push("active-override-bottom"),e.join(" ")}(),style:{width:o,maxWidth:o,minWidth:o}},r)}function se(){var e=Object(i.c)((function(e){return e.selection})),t=Object(i.c)((function(e){return e.cellWidth})),n=Object(i.c)((function(e){return e.cellHeight})),r=Object(i.c)((function(e){return e.viewport})),o=e.startColIndex-r.xOffset,a=e.endColIndex-r.xOffset,c=e.startRowIndex-r.yOffset,u=e.endRowIndex-r.yOffset;u<c&&(c+=1),a<o&&(o+=1);var d=(a-o)*(t-1),s=(u-c+1)*(n-1)+(u-c<0?-(n-1):0),f=o*(t-1)+Math.min(d,0),x=c*(n-1)+Math.min(s,0),p={width:Math.abs(d),height:Math.abs(s),left:f,top:x};return 0!=d&&0!=s||(p.display="none"),l.a.createElement("div",{className:"text-grid-selection",style:p})}function fe(){var e=Object(i.c)((function(e){return e.viewport})),t=Object(i.c)((function(e){return e.target})),n=(Object(i.c)((function(e){return e.cells})),Object(i.c)((function(e){return e.selection})));return l.a.createElement("div",{className:"text-grid-status-bar"},l.a.createElement("ul",null,l.a.createElement("li",null,"R: ",e.rows),l.a.createElement("li",null,"C: ",e.cols),l.a.createElement("li",null,"SX: ",e.xOffset),l.a.createElement("li",null,"SY: ",e.yOffset),l.a.createElement("li",null,"TX: ",t.colIndex),l.a.createElement("li",null,"TY: ",t.rowIndex),l.a.createElement("li",null,"SX: ",n.startColIndex),l.a.createElement("li",null,"SY: ",n.startRowIndex),l.a.createElement("li",null,"EX: ",n.endColIndex),l.a.createElement("li",null,"EY: ",n.endRowIndex),l.a.createElement("li",null,"dragging: ",n.isDragging?"true":"false"),l.a.createElement("li",null,"mouseDown: ",n.isMouseDown?"true":"false")))}function xe(){var e=Object(o.useState)(1),t=Object(ce.a)(e,2),n=t[0],r=t[1],a=Object(o.useState)(),c=Object(ce.a)(a,2),i=c[0],u=c[1];Object(o.useEffect)((function(){f(),x()}),[]);var d={clear:function(e){f()},echo:function(e){s(e.join(" "))}},s=function(e){u(i+"\n "+e),i+="\n"+e},f=function(){u(""),i=""},x=function(){!function(e){var t=e.split(" ");if(0!==t.length){var n=Object(ae.a)(t),r=n[0],o=n.slice(1);void 0!==d[r]&&d[r](o)}}(i.substr(n)),u(i+"\n> "),r((i+="\n> ").length)};return l.a.createElement("div",{className:"text-grid-console",style:{maxHeight:200,height:200,display:"flex"}},l.a.createElement("textarea",{wrap:"off",spellCheck:"false",value:i,onChange:function(e){u(e.target.value)},onKeyDown:function(e){1===e.key.length||("Enter"===e.key?(x(),e.preventDefault()):"Backspace"===e.key?e.target.selectionStart<=n&&e.preventDefault():"Delete"===e.key&&e.target.selectionStart<n&&e.preventDefault())},onSelect:function(e){e.target.selectionStart===n-1?e.target.setSelectionRange(n,n):e.target.selectionStart<n-1&&e.target.setSelectionRange(e.target.value.length,e.target.value.length)}}))}function pe(e){return l.a.createElement(i.a,{store:le},l.a.createElement("div",{className:"text-grid-container",style:{display:"flex",flexDirection:"column",height:"100%"}},l.a.createElement(ie,e),l.a.createElement(xe,null),l.a.createElement(fe,null)))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement((function(){var e={cellWidth:32,cellHeight:32,text:"\nHello world,\nthe quick brown fox \njumps over\nthe lazy \ndog\n",events:{onKeyDown:function(e,t){return"v"===t?{preventDefault:!1,actions:[r.setTypeingDir(0,1)]}:">"===t?{preventDefault:!1,actions:[r.setTypeingDir(1,0)]}:"<"===t?{preventDefault:!1,actions:[r.setTypeingDir(-1,0)]}:"^"===t?{preventDefault:!1,actions:[r.setTypeingDir(0,-1)]}:{}}}};return l.a.createElement("div",{className:"App"},l.a.createElement("div",{style:{width:"calc(100%)",height:"calc(100% )",overflow:"hidden"}},l.a.createElement(pe,{config:e})))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[45,1,2]]]);
//# sourceMappingURL=main.e934be97.chunk.js.map