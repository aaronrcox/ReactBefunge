(this.webpackJsonpReactBefunge=this.webpackJsonpReactBefunge||[]).push([[0],{60:function(e,t,n){e.exports=n(78)},65:function(e,t,n){},70:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"NO_OP",(function(){return f})),n.d(r,"SETUP_GRID",(function(){return p})),n.d(r,"INITIALISE_GRID",(function(){return h})),n.d(r,"MOUSE_MOVED",(function(){return x})),n.d(r,"MOUSE_DOWN",(function(){return v})),n.d(r,"MOUSE_UP",(function(){return g})),n.d(r,"SCROLL_VIEW",(function(){return I})),n.d(r,"DRAG",(function(){return m})),n.d(r,"KEY_DOWN",(function(){return w})),n.d(r,"SET_HOVER_CELL",(function(){return b})),n.d(r,"SET_CELL_VALUE",(function(){return y})),n.d(r,"SET_TARGET_CELL",(function(){return O})),n.d(r,"MOVE_TARGET_CELL",(function(){return E})),n.d(r,"INSERT_ROW",(function(){return C})),n.d(r,"INSERT_COL",(function(){return k})),n.d(r,"DELETE_ROW",(function(){return S})),n.d(r,"DELETE_COL",(function(){return j})),n.d(r,"SET_SELECTION_AREA",(function(){return T})),n.d(r,"CLEAR_SELECTION_AREA",(function(){return R})),n.d(r,"SET_TYPEING_DIRECTION",(function(){return G})),n.d(r,"FILL_SELECTION",(function(){return D})),n.d(r,"PASTE",(function(){return _})),n.d(r,"COPY",(function(){return M})),n.d(r,"CUT",(function(){return N})),n.d(r,"none",(function(){return P})),n.d(r,"setupGrid",(function(){return A})),n.d(r,"initialiseGrid",(function(){return L})),n.d(r,"mouseMoved",(function(){return H})),n.d(r,"mouseDown",(function(){return W})),n.d(r,"mouseUp",(function(){return U})),n.d(r,"scrollView",(function(){return X})),n.d(r,"drag",(function(){return Y})),n.d(r,"keyDown",(function(){return z})),n.d(r,"setHoverCell",(function(){return B})),n.d(r,"setCellValue",(function(){return $})),n.d(r,"setTargetCell",(function(){return F})),n.d(r,"moveTargetCell",(function(){return V})),n.d(r,"setSelectionArea",(function(){return q})),n.d(r,"clearSelectionArea",(function(){return K})),n.d(r,"insertRow",(function(){return J})),n.d(r,"insertCol",(function(){return Z})),n.d(r,"deleteRow",(function(){return Q})),n.d(r,"deleteCol",(function(){return ee})),n.d(r,"setTypeingDir",(function(){return te})),n.d(r,"paste",(function(){return ne})),n.d(r,"copy",(function(){return re})),n.d(r,"cut",(function(){return ae})),n.d(r,"fillSelection",(function(){return oe}));var a=n(0),o=n.n(a),i=n(11),c=n.n(i),l=(n(65),n(6)),s=(n(70),n(27)),u=(n(71),n(5)),d=n(2),f="[TextGrid] NO Op",p="[TextGrid] Setup",h="[TextGrid] Initialise",x="[TextGrid] MouseMoved",v="[TextGrid] Mouse Pressed",g="[TextGrid] Mouse Released",I="[TextGrid] Scroll View",m="[TextGrid] Drag",w="[TextGrid] Key Down",b="[TextGrid] Set Hover Cell",y="[TextGrid] Set Cell Text",O="[TextGrid] Set Target Cell",E="[TextGrid] Move Target Cell",C="[TextGrid] Insert Row",k="[TextGrid] Insert Col",S="[TextGrid] Delete Row",j="[TextGrid] Delete Col",T="[TextGrid] Set Selection Area",R="[TextGrid] Clear Selection",G="[TextGrid] Set Text Direction",D="[TextGrid] Fill Selection",_="[TextGrid] Paste",M="[TextGrid] Copy",N="[TextGrid] Cut";function P(){return{type:f}}function A(e,t,n,r,a){return{type:p,payload:{width:e,height:t,text:n,cellWidth:r,cellHeight:a}}}function L(e){return{type:h,payload:e}}function H(e){return{type:x,payload:e}}function W(){return{type:v}}function U(){return{type:g}}function X(e,t){return{type:I,payload:{xOffset:e,yOffset:t}}}function Y(){return{type:m}}function z(e){return{type:w,payload:e}}function B(e){return{type:b,payload:e}}function $(e){return{type:y,payload:e}}function F(e,t){return{type:O,payload:{rowIndex:e,colIndex:t}}}function V(e,t,n){return{type:E,payload:{x:e,y:t,invert:n}}}function q(e){return{type:T,payload:e}}function K(e){return{type:R}}function J(e){return{type:C,payload:{rowIndex:e}}}function Z(e,t){return{type:k,payload:{rowIndex:e,colIndex:t}}}function Q(e){return{type:S,payload:{rowIndex:e}}}function ee(e,t){return{type:j,payload:{rowIndex:e,colIndex:t}}}function te(e,t){return{type:G,payload:{x:e,y:t}}}function ne(e){return{type:_,payload:e}}function re(e){return{type:M,payload:e}}function ae(e){return{type:N,payload:e}}function oe(e){return{type:D,payload:e}}var ie={initialised:!1,cellWidth:24,cellHeight:24,rows:0,cols:0,cells:[],insertMode:!1,viewport:{rows:0,cols:0,xOffset:0,yOffset:0},hover:{rowIndex:-1,colIndex:-1},target:{rowIndex:-1,colIndex:-1,dir:{x:1,y:0}},selection:{isMouseDown:!1,isDragging:!1,startRowIndex:0,startColIndex:0,endRowIndex:0,endColIndex:0},selectedCells:[]};function ce(e){return{rows:e.length,cols:Math.max.apply(Math,Object(u.a)(e.map((function(e){return e.length}))))}}function le(e,t,n){for(;e.length<=n;)e.push([]);for(;e[n].length<=t;)e[n].push("")}function se(e,t){var n=Object(d.a)({},e),r=n.xOffset,a=n.xOffset+n.cols-2,o=n.yOffset,i=n.yOffset+n.rows-1;return t.colIndex>=r&&t.colIndex<=a&&t.rowIndex>=i&&t.rowIndex<=o?e:(t.colIndex<r&&(n.xOffset=t.colIndex),t.colIndex>=a&&(n.xOffset=t.colIndex-n.cols+3),t.rowIndex<o&&(n.yOffset=t.rowIndex),t.rowIndex>=i&&(n.yOffset=t.rowIndex-n.rows+2),n)}var ue=n(57),de=n(82),fe=n(56),pe=Object(de.a)((function(e,t){return e.pipe(Object(ue.a)(p),Object(fe.a)((function(e){var n=e.payload.width,r=e.payload.height,a=e.payload.text,o=e.payload.cellWidth||t.value.textGrid.cellWidth,i=e.payload.cellHeight||t.value.textGrid.cellHeight;return[L({cellWidth:o,cellHeight:i,rows:Math.floor(r/(i-1))+1,cols:Math.floor(n/(o-1))+1,cells:a.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/).map((function(e){return e.split("")}))})]})))}),(function(e,t){return e.pipe(Object(ue.a)(x),Object(fe.a)((function(e){var n=e.payload.mouseX,r=e.payload.mouseY,a=t.value.textGrid.cellWidth-1,o=t.value.textGrid.cellHeight-1,i=t.value.textGrid.viewport,c=Math.floor(r/o)+i.yOffset,l=Math.floor(n/a)+i.xOffset,s={rowIndex:c,colIndex:l},u=[];return c===t.value.textGrid.hover.rowIndex&&l===t.value.textGrid.hover.colIndex||u.push(B(s)),t.value.textGrid.selection.isMouseDown&&u.push(Y()),u})))}),(function(e,t){return e.pipe(Object(ue.a)(w),Object(fe.a)((function(e){var n=e.payload.key,r=t.value.textGrid.target.rowIndex,a=t.value.textGrid.target.colIndex,o=e.payload.isShiftDown,i=e.payload.callback(t.value,n)||{},c=i.actions||[];if(i.preventDefault)return c;if(1===n.length)return t.value.textGrid.selection.startRowIndex!==t.value.textGrid.selection.endRowIndex||t.value.textGrid.selection.startColIndex!==t.value.textGrid.selection.endColIndex?[oe(n)]:[].concat(Object(u.a)(c),[$({rowIndex:r,colIndex:a,value:n}),V()]);if("Tab"===n){var l=o?-1:1;return[].concat(Object(u.a)(c),[V(l,0)])}if("Enter"===n){var s=o?-1:1;return[].concat(Object(u.a)(c),[V(0,s)])}if("Backspace"===n)return[].concat(Object(u.a)(c),[K(),$({value:""}),V(void 0,void 0,!0)]);if("Delete"===n)return[].concat(Object(u.a)(c),[K(),$({rowIndex:r,colIndex:a,value:""})]);if(n.includes("Arrow")){var f={x:0,y:0};switch(n){case"ArrowLeft":f.x=-1;break;case"ArrowRight":f.x=1;break;case"ArrowUp":f.y=-1;break;case"ArrowDown":f.y=1}if(o){var p=Object(d.a)({},t.value.textGrid.selection);return p.endColIndex+=f.x,p.endRowIndex+=f.y,[].concat(Object(u.a)(c),[q(p),te(f.x,f.y)])}return[].concat(Object(u.a)(c),[V(f.x,f.y),te(f.x,f.y)])}return[]})))}),(function(e,t){return e.pipe(Object(ue.a)(M),Object(fe.a)((function(e){var n=he(t);return navigator.clipboard.writeText(n),[]})))}),(function(e,t){return e.pipe(Object(ue.a)(N),Object(fe.a)((function(e){var n=he(t);return navigator.clipboard.writeText(n),[K()]})))}));function he(e){for(var t=e.value.textGrid.cells,n=e.value.textGrid.selection.startColIndex,r=e.value.textGrid.selection.startRowIndex,a=e.value.textGrid.selection.endColIndex,o=e.value.textGrid.selection.endRowIndex+1,i="",c=r;c<o;c++)if(c>=o)i+="\n";else{for(var l=n;l<a&&l<t[c].length;l++)i+=t[c][l];c<o-1&&(i+="\n")}return i}var xe=n(25),ve=n(81),ge=Object(ve.a)(),Ie=Object(xe.c)({textGrid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(console.log(e.rows),t.type){case h:var n=Object(d.a)({},e.viewport,{rows:t.payload.rows,cols:t.payload.cols}),r=ce(t.payload.cells);return Object(d.a)({},e,{},t.payload,{},r,{initialised:!0,viewport:n});case b:return Object(d.a)({},e,{hover:t.payload});case y:var a=t.payload.rowIndex?t.payload.rowIndex:e.target.rowIndex,o=t.payload.colIndex?t.payload.colIndex:e.target.colIndex,i=t.payload.value,c=e.cells;le(c,o,a),c[a][o]=i,function(e){for(var t=e.length-1;t>=0;t--)for(var n=e[t].length-1;n>=0&&!e[t][n];n--)e[t].pop();for(var r=e.length-1;r>=0&&!(e[r].length>0);r--)e.pop();console.log(e)}(c);var l=ce(c);return Object(d.a)({},e,{},l,{cells:c});case O:var s=Object(d.a)({},e.target,{},t.payload),f=Object(d.a)({},e.selection,{startRowIndex:s.rowIndex,startColIndex:s.colIndex,endRowIndex:s.rowIndex,endColIndex:s.colIndex}),p=se(e.viewport,s);return Object(d.a)({},e,{viewport:p,target:s,selection:f});case E:var x=t.payload.invert?-1:1,w=t.payload&&void 0!==t.payload.x?t.payload.x:e.target.dir.x,M=t.payload&&void 0!==t.payload.y?t.payload.y:e.target.dir.y,N=Object(d.a)({},e.target,{},function(e,t,n){var r=e.rowIndex+n,a=e.colIndex+t;return r=Math.max(r,0),a=Math.max(a,0),{rowIndex:r,colIndex:a}}(e.target,w*x,M*x)),P=Object(d.a)({},e.selection,{startRowIndex:N.rowIndex,startColIndex:N.colIndex,endRowIndex:N.rowIndex,endColIndex:N.colIndex}),A=se(e.viewport,N);return Object(d.a)({},e,{viewport:A,target:N,selection:P});case C:var L=t.payload.rowIndex,H=e.cells;return H.splice(L,0,[]),Object(d.a)({},e,{cells:H});case k:for(var W=t.payload,U=W.rowIndex,X=W.colIndex,Y=e.cells;Y.length<=U;)Y.push([]);for(;Y[U].length<=X;)Y[U].push("");return Y[U].splice(X,0,""),Object(d.a)({},e,{cells:Y});case S:var z=t.payload.rowIndex,B=e.cells;return B.splice(z,1),Object(d.a)({},e,{cells:B});case j:console.log(j);var $=t.payload,F=$.rowIndex,V=$.colIndex,q=e.cells;return q.length<=F?e:q[F].length<=V?e:(q[F].splice(V,1),Object(d.a)({},e,{cells:q}));case T:var K=Object(d.a)({},e.selection,{},t.payload),J=Object(d.a)({},e.target,{rowIndex:K.endRowIndex,colIndex:K.endColIndex});return Object(d.a)({},e,{selection:K,target:J});case R:for(var Z=e.cells,Q=Math.min(e.selection.startRowIndex,e.selection.endRowIndex),ee=Math.max(e.selection.startRowIndex,e.selection.endRowIndex),te=Math.min(e.selection.startColIndex,e.selection.endColIndex),ne=Math.max(e.selection.startColIndex,e.selection.endColIndex),re=Q;re<=ee&&re<Z.length;re++)for(var ae=te;ae<ne&&ae<Z[re].length;ae++)Z[re][ae]="";return Object(d.a)({},e,{cells:Z});case v:var oe=Object(d.a)({},e.target,{rowIndex:e.hover.rowIndex,colIndex:e.hover.colIndex}),ue=Object(d.a)({},e.selection,{startColIndex:oe.colIndex,startRowIndex:oe.rowIndex,endColIndex:oe.colIndex,endRowIndex:oe.rowIndex,isDragging:!1,isMouseDown:!0});return Object(d.a)({},e,{target:oe,selection:ue});case g:var de=Object(d.a)({},e.selection,{isDragging:!1,isMouseDown:!1});return Object(d.a)({},e,{selection:de});case I:var fe=t.payload,pe=fe.xOffset,he=fe.yOffset,xe=Object(d.a)({},e.viewport,{xOffset:Math.floor(pe/e.cellWidth),yOffset:Math.floor(he/e.cellHeight)});return Object(d.a)({},e,{viewport:xe});case m:if(e.selection.isDragging){var ve=Object(d.a)({},e.selection);ve.endRowIndex=e.hover.rowIndex,ve.endColIndex=e.hover.colIndex,ve.endColIndex+=ve.endColIndex<ve.startColIndex?0:1;var ge=Object(d.a)({},e.target,{rowIndex:e.hover.rowIndex,colIndex:e.hover.colIndex});return Object(d.a)({},e,{selection:ve,target:ge})}var Ie=Object(d.a)({},e.target,{rowIndex:e.hover.rowIndex,colIndex:e.hover.colIndex}),me=Object(d.a)({},e.selection,{isDragging:!0});return Object(d.a)({},e,{selection:me,target:Ie});case G:var we=Object(d.a)({},e.target);return we.dir=Object(d.a)({},t.payload),Object(d.a)({},e,{target:we});case _:for(var be=t.payload.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/).map((function(e){return e.split("")})),ye=e.cells,Oe=e.selection.startColIndex,Ee=e.selection.startRowIndex,Ce=Math.max.apply(Math,Object(u.a)(be.map((function(e){return e.length})))),ke=be.length,Se=0;Se<be.length;Se++)for(var je=0;je<be[Se].length;je++){var Te=je+Oe,Re=Se+Ee;le(ye,Te,Re),ye[Re][Te]=be[Se][je]}var Ge=Object(d.a)({},e.selection,{startRowIndex:Ee,startColIndex:Oe,endRowIndex:Ee+ke-1,endColIndex:Oe+Ce}),De=ce(ye);return Object(d.a)({},e,{},De,{cells:ye,selection:Ge});case D:for(var _e=e.cells,Me=e.selection.startColIndex,Ne=e.selection.startRowIndex,Pe=e.selection.endColIndex,Ae=e.selection.endRowIndex,Le=Math.min(Me,Pe),He=Math.min(Ne,Ae),We=Math.max(Me,Pe),Ue=Math.max(Ne,Ae),Xe=He;Xe<=Ue;Xe++)for(var Ye=Le;Ye<We;Ye++)le(_e,Ye,Xe),_e[Xe][Ye]=t.payload;var ze=ce(_e);return Object(d.a)({},e,{},ze,{cells:_e});default:return e}}}),me=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||xe.d,we=Object(xe.e)(Ie,me(Object(xe.a)(ge)));ge.run(pe);n(72);var be=Object(a.forwardRef)((function(e,t){Object(a.useImperativeHandle)(t,(function(){return{getCells:function(){return we.getState().textGrid.cells}}}),[]);var n=Object(l.b)(),r=Object(l.c)((function(e){return e.textGrid.initialised})),i=Object(l.c)((function(e){return e.textGrid.viewport.rows})),c=Object(l.c)((function(e){return e.textGrid.viewport.xOffset})),s=Object(l.c)((function(e){return e.textGrid.viewport.yOffset})),u=i>0?new Array(i).fill(""):[],d=Object(a.useRef)(null);Object(a.useEffect)((function(){if(!r){var t=d.current?d.current.offsetWidth:0,a=d.current?d.current.offsetHeight:0;n(A(t,a,e.config.text,e.config.cellWidth,e.config.cellHeight))}var o=document.addEventListener("paste",(function(e){n(ne(e.clipboardData.getData("text")))}));return function(){document.removeEventListener("paste",o)}}),[r,e,n]);return d.current&&(d.current.scrollLeft=c*e.config.cellWidth,d.current.scrollTop=s*e.config.cellHeight),o.a.createElement("div",{ref:d,className:"text-grid-area",onScroll:function(e){e.preventDefault(),n(X(e.target.scrollLeft,e.target.scrollTop))},draggable:!0,tabIndex:"0",onKeyDown:function(t){if(t.ctrlKey){var r=t.key.toLowerCase();"v"===r||("c"===r?(n(re()),t.preventDefault()):"x"===r&&(n(ae()),t.preventDefault()))}else t.preventDefault(),n(z({key:t.key,isShiftDown:t.shiftKey,callback:e.config.events.onKeyDown}))},onMouseMove:function(e){var t=e.currentTarget.getBoundingClientRect(),r=e.clientX-t.left,a=e.clientY-t.top;n(H({mouseX:r,mouseY:a}))},onMouseUp:function(e){e.preventDefault(),n(U())},onMouseDown:function(e){e.preventDefault(),e.currentTarget.focus(),n(W())},onMouseLeave:function(e){n(B({rowIndex:-1,colIndex:-1}))}},o.a.createElement("div",{className:"text-grid"},u.map((function(e,t){return o.a.createElement(ye,{key:"gridRow-".concat(t),rowId:t+s})})),o.a.createElement(Ee,null)),o.a.createElement("div",{style:{width:1e4,height:1e4,position:"absolute"}}))}));function ye(e){var t=e.rowId,n=Object(l.c)((function(e){return e.textGrid.cellHeight})),r=Object(l.c)((function(e){return e.textGrid.viewport.cols})),a=Object(l.c)((function(e){return e.textGrid.viewport.xOffset})),i=r>0?new Array(r).fill(""):[];return o.a.createElement("div",{className:"text-grid-row",style:{height:n,maxHeight:n,minHeight:n}},i.map((function(e,n){var r=n+a;return o.a.createElement(Oe,{key:"cell-"+t+"-"+r,rowId:t,colId:r})})))}function Oe(e){var t=e.rowId,n=e.colId,r=Object(l.c)((function(e){return t<e.textGrid.cells.length&&n<e.textGrid.cells[t].length?e.textGrid.cells[t][n]:""})),a=Object(l.c)((function(e){return e.textGrid.cellWidth})),i=Object(l.c)((function(e){return e.textGrid.hover.rowIndex===t})),c=Object(l.c)((function(e){return e.textGrid.hover.colIndex===n})),s=Object(l.c)((function(e){return e.textGrid.target.rowIndex===t&&e.textGrid.target.colIndex===n})),u=Object(l.c)((function(e){return e.textGrid.rows-1===t})),d=Object(l.c)((function(e){return e.textGrid.cols-1===n})),f=Object(l.c)((function(e){return s?e.textGrid.target.dir.x:0})),p=Object(l.c)((function(e){return s?e.textGrid.target.dir.y:0})),h=i&&c;return o.a.createElement("span",{className:function(){var e=["text-grid-cell"];return h&&e.push("cell-hover"),i&&e.push("row-hover"),c&&e.push("col-hover"),s&&e.push("active-override"),s&&f>0&&e.push("active-override-left"),s&&f<0&&e.push("active-override-right"),s&&p>0&&e.push("active-override-top"),u&&e.push("bottom-edge"),d&&e.push("right-edge"),e.join(" ")}(),style:{width:a,maxWidth:a,minWidth:a}},o.a.createElement("div",{className:"text-grid-cell-content"},r))}function Ee(){var e=Object(l.c)((function(e){return e.textGrid.selection})),t=Object(l.c)((function(e){return e.textGrid.cellWidth})),n=Object(l.c)((function(e){return e.textGrid.cellHeight})),r=Object(l.c)((function(e){return e.textGrid.viewport})),a=e.startColIndex-r.xOffset,i=e.endColIndex-r.xOffset,c=e.startRowIndex-r.yOffset,s=e.endRowIndex-r.yOffset;s<c&&(c+=1),i<a&&(a+=1);var u=(i-a)*(t-1),d=(s-c+1)*(n-1)+(s-c<0?-(n-1):0),f=a*(t-1)+Math.min(u,0),p=c*(n-1)+Math.min(d,0),h={width:Math.abs(u),height:Math.abs(d),left:f,top:p};return 0!==u&&0!==d||(h.display="none"),o.a.createElement("div",{className:"text-grid-selection",style:h})}function Ce(){var e=Object(l.c)((function(e){return e.textGrid.viewport})),t=Object(l.c)((function(e){return e.textGrid.target})),n=Object(l.c)((function(e){return e.textGrid.selection}));return o.a.createElement("div",{className:"text-grid-status-bar"},o.a.createElement("ul",null,o.a.createElement("li",null,"R: ",e.rows),o.a.createElement("li",null,"C: ",e.cols),o.a.createElement("li",null,"SX: ",e.xOffset),o.a.createElement("li",null,"SY: ",e.yOffset),o.a.createElement("li",null,"TX: ",t.colIndex),o.a.createElement("li",null,"TY: ",t.rowIndex),o.a.createElement("li",null,"SX: ",n.startColIndex),o.a.createElement("li",null,"SY: ",n.startRowIndex),o.a.createElement("li",null,"EX: ",n.endColIndex),o.a.createElement("li",null,"EY: ",n.endRowIndex),o.a.createElement("li",null,"dragging: ",n.isDragging?"true":"false"),o.a.createElement("li",null,"mouseDown: ",n.isMouseDown?"true":"false")))}var ke=n(52),Se=(n(73),{readOnlyPos:2,consoleText:"> "}),je=function(e,t){switch(t.type){case"BEGIN_USER_INPIT":var n=e.consoleText+="> ",r=n.length;return Object(d.a)({},e,{consoleText:n,readOnlyPos:r});case"SET_CONSOLE_TEXT":var a=t.payload;return Object(d.a)({},e,{consoleText:a});case"END_USER_INPUT":var o=e.consoleText.length,i=e.consoleText.length>0?e.consoleText+="\n":"";return Object(d.a)({},e,{readOnlyPos:o,consoleText:i});case"APPEND_PROGRAM_INPUT":var c=e.consoleText+t.payload,l=c.length;return Object(d.a)({},e,{consoleText:c,readOnlyPos:l});case"CLEAR_TERMINAL":return Object(d.a)({},e,{consoleText:"",readOnlyPos:0});case"SET_STATE":return Object(d.a)({},e,{},t.payload);default:return console.warn("UNHANDELED ACTION"),e}},Te=function(){return{type:"BEGIN_USER_INPIT"}},Re=function(){return{type:"END_USER_INPUT"}},Ge=function(e){return{type:"SET_CONSOLE_TEXT",payload:e}},De=function(e){return{type:"APPEND_PROGRAM_INPUT",payload:e}},_e=function(){return{type:"CLEAR_TERMINAL"}},Me=Object(a.forwardRef)((function(e,t){var n=Object(a.useReducer)(je,Se),r=Object(s.a)(n,2),i=r[0],c=r[1],l=Object(d.a)({clear:function(e){c(_e())},echo:function(e){c(De(e.join(" ")+"\n"))}},e.commands),u=Object(a.useCallback)((function(t){if(!e.onEnter||!e.onEnter(t)){var n=t.split(" ");if(0!==n.length){var r=Object(ke.a)(n),a=r[0],o=r.slice(1);void 0!==l[a]&&l[a](o),c(Re()),c(Te())}}}),[e,l]);return Object(a.useImperativeHandle)(t,(function(){return{print:function(e){c(De(e))},submitInput:function(){var e=i.consoleText.substr(i.readOnlyPos);u(e)}}}),[i.consoleText,i.readOnlyPos,u]),o.a.createElement("div",{className:"terminal"},o.a.createElement("textarea",{wrap:"off",spellCheck:"false",value:i.consoleText,onChange:function(e){c(Ge(e.target.value))},onKeyDown:function(e){if(1===e.key.length);else if("Enter"===e.key){var t=i.consoleText.substr(i.readOnlyPos);u(t),e.preventDefault()}else"Backspace"===e.key?e.target.selectionStart<=i.readOnlyPos&&e.preventDefault():"Delete"===e.key&&e.target.selectionStart<i.readOnlyPos&&e.preventDefault()},onSelect:function(e){e.target.selectionStart===i.readOnlyPos-1?e.target.setSelectionRange(i.readOnlyPos,i.readOnlyPos):e.target.selectionStart<i.readOnlyPos-1&&e.target.setSelectionRange(e.target.value.length,e.target.value.length)}}))}));n(74);function Ne(e){var t=e.items||[];return o.a.createElement("div",{className:"toolbar"},o.a.createElement("ul",null,t.map((function(e,t){return o.a.createElement("li",{key:"tbitem-"+t,className:e.classNames,onClick:e.onClick},e.text)}))))}var Pe=n(12),Ae=n(10),Le=n(80),He=function(){function e(t){Object(Pe.a)(this,e),this.instructionInfo={"0-9":"Push this number on the stack","+":"Addition: Pop a and b, then push a+b","-":"Subtraction: Pop a and b, then push b-a","*":"Multiplication: Pop a and b, then push a*b","/":"Integer division: Pop a and b, then push b/a, rounded towards 0","%":"Modulo: Pop a and b, then push the remainder of the integer division of b/a","!":"Logical NOT: Pop a value. If the value is zero, push 1; otherwise, push zero","`":"Greater than: Pop a and b, then push 1 if b>a, otherwise zero",">":"Start moving right","<":"Start moving left","^":"Start moving up",v:"Start moving down","?":"Start moving in a random cardinal direction",_:"Pop a value; move right if value=0, left otherwise","|":"Pop a value; move down if value=0, up otherwise",'"':"Start string mode: push each character's ASCII value all the way up to the next\"",":":"Duplicate value on top of the stack","\\":"Swap two values on top of the stack",$:"Pop value from the stack and discard it",".":"Pop value and output as an integer followed by a space",",":"Pop value and output as ASCII character","#":"Bridge: Skip next cell",p:'A "put" call (a way to store a value for later use). Pop y, x, and v, then change the character at (x,y) in the program to the character with ASCII value v',g:'A "get" call (a way to retrieve data in storage). Pop y and x, then push ASCII value of the character at that position in the program',"&":"Ask user for a number and push it","~":"Ask user for a character and push its ASCII value","@":"End program",StringMode:"all characters are pushed onto the stack"},this.program=t,this.numRows=this.program.length,this.numCols=Math.max.apply(Math,Object(u.a)(this.program.map((function(e){return e.length})))),this.stack=[],this.stack$=new Le.a([]),this.onInstructionExecutedCb=null,this.onConsoleOutCb=null,this.onProgramTerminateCb=null,this.onRequestConsoleInputCb=null,this.currentInstruction=null,this.nextInstruction=Object(d.a)({x:0,y:0,i:t[0][0]},this.getInstructionDir(1,0,t[0][0])),this.stringMode=!1,this.waitingForInput=!1,this.inputStack=[],this.skipCount=0}return Object(Ae.a)(e,[{key:"destroy",value:function(){}},{key:"step",value:function(){if(!this.waitingForInput){this.currentInstruction=this.nextInstruction;var e=this.currentInstruction;if(null!==e){if(this.stringMode)'"'===e.i?this.stringMode=!1:this.pushStack(e.i.charCodeAt(0));else if(e.i.includes([">","<","v","^","?"]));else if(e.i>="0"&&e.i<="9")this.pushStack(parseInt(e.i));else if("+"===e.i){var t=this.popStack(),n=this.popStack();this.pushStack(t+n)}else if("-"===e.i){var r=this.popStack(),a=this.popStack();this.pushStack(a-r)}else if("*"===e.i){var o=this.popStack(),i=this.popStack();this.pushStack(o*i)}else if("/"===e.i){var c=this.popStack(),l=this.popStack();this.pushStack(l/c)}else if("%"===e.i){var s=this.popStack(),u=this.popStack();this.pushStack(u%s)}else if("!"===e.i){var d=this.popStack();this.pushStack(0===d?1:0)}else if("`"===e.i){var f=this.popStack(),p=this.popStack();this.pushStack(p>f?1:0)}else if("_"===e.i)this.popStack();else if("|"===e.i)this.popStack();else if('"'===e.i)this.stringMode=!this.stringMode;else if(":"===e.i)this.stack.length>0&&this.pushStack(this.stack[this.stack.length-1]);else if("\\"===e.i){var h=this.popStack(),x=this.popStack();this.pushStack(h),this.pushStack(x)}else if("$"===e.i)this.popStack();else if("."===e.i){var v=this.popStack();this.onConsoleOutCb(v)}else if(","===e.i){var g=this.popStack();this.onConsoleOutCb(String.fromCharCode(g))}else if("#"===e.i)this.skipCount+=1;else if("p"===e.i){var I=this.popStack(),m=this.popStack(),w=this.popStack(),b=String.fromCharCode(w);this.program[I][m]=b}else if("g"===e.i){var y=this.popStack(),O=this.popStack();if(O>=0&&O<this.numCols&&y>=0&&y<this.numRows){var E=this.program[y][O];this.pushStack(E)}else this.pushStack(0)}else if("&"===e.i){if(0===this.inputStack.length)return this.waitingForInput=!0,void(this.onRequestConsoleInputCb&&this.onRequestConsoleInputCb());var C=this.inputStack.shift();this.pushStack(parseInt(C))}else if("~"===e.i){if(0===this.inputStack.length)return this.waitingForInput=!0,void(this.onRequestConsoleInputCb&&this.onRequestConsoleInputCb());var k=this.inputStack.shift();this.pushStack(k.charCodeAt(0))}else"@"===e.i&&(e.dirX=0,e.dirY=0,this.onProgramTerminateCb&&this.onProgramTerminateCb());var S=this.getNextInstruction();this.nextInstruction=S,this.onInstructionExecutedCb&&this.onInstructionExecutedCb(e,S)}}}},{key:"pushStack",value:function(e){this.stack.push(e),this.stack$.next(this.stack)}},{key:"popStack",value:function(){var e=this.stack.length>0?this.stack.pop():0;return this.stack$.next(this.stack),e}},{key:"getNextInstruction",value:function(){var e=this.currentInstruction,t=e.x,n=e.y;do{this.skipCount-=1,t+=e.dirX,(n+=e.dirY)<0&&(n=this.numRows-1),t<0&&(t=this.numCols-1),n>=this.numRows&&(n=0),t>=this.numCols&&(t=0)}while(this.skipCount>=0);this.skipCount=0;var r=t<this.program[n].length?this.program[n][t]:"",a=this.getInstructionDir(e.dirX,e.dirY,r);return Object(d.a)({x:t,y:n,i:r},a)}},{key:"getInstructionDir",value:function(e,t,n){var r=e,a=t;if(this.stringMode)return{dirX:r,dirY:a};switch(n){case">":r=1,a=0;break;case"<":r=-1,a=0;break;case"^":r=0,a=-1;break;case"v":r=0,a=1;break;case"?":var o=Math.floor(4*Math.random());0===o&&(r=1,a=0),1===o&&(r=0,a=1),2===o&&(r=-1,a=0),3===o&&(r=0,a=-1);break;case"_":a=0,r=0===(this.stack.length>0?this.stack[this.stack.length-1]:0)?1:-1;break;case"|":a=0===(this.stack.length>0?this.stack[this.stack.length-1]:0)?1:-1,r=0}return{dirX:r,dirY:a}}},{key:"input",value:function(e){this.inputStack.push(e),this.waitingForInput=!1}},{key:"onInstructionExecuted",value:function(e){this.onInstructionExecutedCb=e}},{key:"onConsoleOut",value:function(e){this.onConsoleOutCb=e}},{key:"onRequestConsoleInput",value:function(e){this.onRequestConsoleInputCb=e}},{key:"onProgramTerminate",value:function(e){this.onProgramTerminateCb=e}}]),e}(),We=n(14);n(77);function Ue(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)((function(){var t=null;return e.program&&(t=e.program.stack$.subscribe((function(e){i(Object(u.a)(e))}))),function(){t&&t.unsubscribe(),i([])}}),[e.program]),o.a.createElement("ul",{className:"befunge-stack-view"},r.reverse().map((function(e,t){return o.a.createElement("li",{key:"bfstack-"+t},o.a.createElement("span",{style:{float:"left"}},e),o.a.createElement("span",{style:{float:"right"}},String.fromCharCode(e)))})))}var Xe=null,Ye=Object(a.forwardRef)((function(e,t){var n=Object(a.useState)(null),i=Object(s.a)(n,2),c=i[0],l=i[1],u=function(){var e=v.current.getCells(),t=new He(e);t.onInstructionExecuted((function(e,t){null!==t&&(we.dispatch(r.setTargetCell(t.y,t.x)),we.dispatch(r.setTypeingDir(t.dirX,t.dirY)))})),t.onConsoleOut((function(e){g.current&&g.current.print(e)})),t.onProgramTerminate((function(){f()})),t.onRequestConsoleInput((function(){var e=window.prompt("Enter a value","");c&&c.waitingForInput&&e&&c.input(e)})),c=t,l(t),we.dispatch(r.setTargetCell(0,0)),we.dispatch(r.setTypeingDir(1,0))},d=function(){null===c&&null===Xe&&(u(),Xe=setInterval((function(){p()}),1))},f=function(){clearInterval(Xe),Xe=null,l(null),g.current&&(g.current.print("\nProgram Terminated!\n"),g.current.submitInput())},p=function(){c.step()},h={"set-cursor-pos":function(e){var t,n;t=parseInt(e[0]),n=parseInt(e[1]),we.dispatch(r.setTargetCell(t,n))},"set-cursor-dir":function(e){var t,n;t=parseInt(e[0]),n=parseInt(e[1]),we.dispatch(r.setTypeingDir(t,n))},run:function(e){d()},next:function(e){p()},stack:function(e){console.log(c.stack)}},x={cellWidth:16,cellHeight:16,text:'1-0g:"Z"-#v_$91+"sparw tup/teG">:#,_$               v                          Z\n          >:" "-#v_$91+"ecaps snruter teg BOO">:#,_$v\nv                >0" snruter teg BOO">:#,_$.91+,    >\n>8:+:*11p11g#v_91+"tib 8 dengis"01-11p11g!#v_"nu">" era slleC">:#,_v\nvv           >91+"tib 8>"                  >     ^                 >91+"krow " #\n >        >"spmuj egdE">:#,_   91+"krow "04-3%1+#v_        >"sredniamer evitag"v\n>"ton od "^                                      >"ton od "^\n"eN">:#,_  91+"skrow edomgnirts ni @">:#,_@                                    >',events:{onKeyDown:function(e,t){return"v"===t?{preventDefault:!1,actions:[r.setTypeingDir(0,1)]}:">"===t?{preventDefault:!1,actions:[r.setTypeingDir(1,0)]}:"<"===t?{preventDefault:!1,actions:[r.setTypeingDir(-1,0)]}:"^"===t?{preventDefault:!1,actions:[r.setTypeingDir(0,-1)]}:{}}},terminalCommands:h},v=Object(a.useRef)(),g=Object(a.useRef)(),I=[];return null===c?(I.push({text:"Run",classNames:"button",onClick:function(){return d()}}),I.push({text:"Debug",classNames:"button",onClick:function(){u()}})):(I.push({text:"Stop",classNames:"button",onClick:function(){return f()}}),I.push({text:"Step",classNames:"button",onClick:function(){return p()}})),o.a.createElement("div",{className:"befungeIde"},o.a.createElement(We.a,{orientation:"horizontal"},o.a.createElement(We.b,{style:{overflow:"hidden"},minSize:24,maxSize:24},o.a.createElement(Ne,{items:I})),o.a.createElement(We.b,null,o.a.createElement(We.a,{orientation:"vertical"},o.a.createElement(We.b,{flex:"1"},o.a.createElement(We.a,{orientation:"horizontal"},o.a.createElement(We.b,{flex:"1"},o.a.createElement(be,{ref:v,config:x})),o.a.createElement(We.c,null),o.a.createElement(We.b,{minSize:"200",maxSize:"400",style:{overflow:"hidden"}},o.a.createElement(Me,{ref:g,commands:h,onEnter:function(e){c&&c.waitingForInput&&c.input(e)}})))),o.a.createElement(We.c,null),o.a.createElement(We.b,{style:{overflow:"hidden"},minSize:"200",maxSize:"400"},o.a.createElement("div",{className:"asside"},o.a.createElement("div",{className:"asside-header"},"Debug Stack"),o.a.createElement("div",{className:"asside-section",style:{maxHeight:200}},o.a.createElement(Ue,{program:c})))))),o.a.createElement(We.b,{style:{overflow:"hidden"},minSize:24,maxSize:24},o.a.createElement(Ce,null))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement((function(){return o.a.createElement(l.a,{store:we},o.a.createElement("div",{className:"App",style:{width:"calc(100%)",height:"calc(100% )",overflow:"hidden"}},o.a.createElement(Ye,null)))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[60,1,2]]]);
//# sourceMappingURL=main.83179058.chunk.js.map