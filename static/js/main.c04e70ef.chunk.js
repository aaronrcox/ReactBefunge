(this.webpackJsonpReactBefunge=this.webpackJsonpReactBefunge||[]).push([[0],{47:function(e,t,n){e.exports=n(63)},52:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"NO_OP",(function(){return d})),n.d(r,"SETUP_GRID",(function(){return f})),n.d(r,"INITIALISE_GRID",(function(){return h})),n.d(r,"MOUSE_MOVED",(function(){return p})),n.d(r,"MOUSE_DOWN",(function(){return x})),n.d(r,"MOUSE_UP",(function(){return g})),n.d(r,"SCROLL_VIEW",(function(){return v})),n.d(r,"DRAG",(function(){return I})),n.d(r,"KEY_DOWN",(function(){return w})),n.d(r,"SET_HOVER_CELL",(function(){return O})),n.d(r,"SET_CELL_VALUE",(function(){return b})),n.d(r,"SET_TARGET_CELL",(function(){return m})),n.d(r,"MOVE_TARGET_CELL",(function(){return y})),n.d(r,"INSERT_ROW",(function(){return C})),n.d(r,"INSERT_COL",(function(){return E})),n.d(r,"DELETE_ROW",(function(){return k})),n.d(r,"DELETE_COL",(function(){return j})),n.d(r,"SET_SELECTION_AREA",(function(){return R})),n.d(r,"CLEAR_SELECTION_AREA",(function(){return T})),n.d(r,"SET_TYPEING_DIRECTION",(function(){return D})),n.d(r,"none",(function(){return S})),n.d(r,"setupGrid",(function(){return M})),n.d(r,"initialiseGrid",(function(){return N})),n.d(r,"mouseMoved",(function(){return _})),n.d(r,"mouseDown",(function(){return G})),n.d(r,"mouseUp",(function(){return L})),n.d(r,"scrollView",(function(){return W})),n.d(r,"drag",(function(){return A})),n.d(r,"keyDown",(function(){return H})),n.d(r,"setHoverCell",(function(){return X})),n.d(r,"setCellValue",(function(){return Y})),n.d(r,"setTargetCell",(function(){return P})),n.d(r,"moveTargetCell",(function(){return U})),n.d(r,"setSelectionArea",(function(){return V})),n.d(r,"clearSelectionArea",(function(){return q})),n.d(r,"insertRow",(function(){return B})),n.d(r,"insertCol",(function(){return F})),n.d(r,"deleteRow",(function(){return K})),n.d(r,"deleteCol",(function(){return J})),n.d(r,"setTypeingDir",(function(){return $}));var o=n(0),a=n.n(o),i=n(20),c=n.n(i),l=(n(52),n(4)),s=(n(58),n(18)),u=n(1),d="[TextGrid] NO Op",f="[TextGrid] Setup",h="[TextGrid] Initialise",p="[TextGrid] MouseMoved",x="[TextGrid] Mouse Pressed",g="[TextGrid] Mouse Released",v="[TextGrid] Scroll View",I="[TextGrid] Drag",w="[TextGrid] Key Down",O="[TextGrid] Set Hover Cell",b="[TextGrid] Set Cell Text",m="[TextGrid] Set Target Cell",y="[TextGrid] Move Target Cell",C="[TextGrid] Insert Row",E="[TextGrid] Insert Col",k="[TextGrid] Delete Row",j="[TextGrid] Delete Col",R="[TextGrid] Set Selection Area",T="[TextGrid] Clear Selection",D="[TextGrid] Set Text Direction";function S(){return{type:d}}function M(e,t,n,r,o){return{type:f,payload:{width:e,height:t,text:n,cellWidth:r,cellHeight:o}}}function N(e){return{type:h,payload:e}}function _(e){return{type:p,payload:e}}function G(){return{type:x}}function L(){return{type:g}}function W(e,t){return{type:v,payload:{xOffset:e,yOffset:t}}}function A(){return{type:I}}function H(e){return{type:w,payload:e}}function X(e){return{type:O,payload:e}}function Y(e){return{type:b,payload:e}}function P(e,t){return{type:m,payload:{rowIndex:e,colIndex:t}}}function U(e,t,n){return{type:y,payload:{x:e,y:t,invert:n}}}function V(e){return{type:R,payload:e}}function q(e){return{type:T}}function B(e){return{type:C,payload:{rowIndex:e}}}function F(e,t){return{type:E,payload:{rowIndex:e,colIndex:t}}}function K(e){return{type:k,payload:{rowIndex:e}}}function J(e,t){return{type:j,payload:{rowIndex:e,colIndex:t}}}function $(e,t){return{type:D,payload:{x:e,y:t}}}var z={cellWidth:24,cellHeight:24,rows:0,cols:0,cells:[],insertMode:!1,viewport:{rows:0,cols:0,xOffset:0,yOffset:0},hover:{rowIndex:-1,colIndex:-1},target:{rowIndex:-1,colIndex:-1,dir:{x:1,y:0}},selection:{isMouseDown:!1,isDragging:!1,startRowIndex:0,startColIndex:0,endRowIndex:0,endColIndex:0},selectedCells:[]};function Q(e,t){var n=Object(u.a)({},e),r=n.xOffset,o=n.xOffset+n.cols-2,a=n.yOffset,i=n.yOffset+n.rows-1;return t.colIndex>=r&&t.colIndex<=o&&t.rowIndex>=i&&t.rowIndex<=a?e:(t.colIndex<r&&(n.xOffset=t.colIndex),t.colIndex>=o&&(n.xOffset=t.colIndex-n.cols+3),t.rowIndex<a&&(n.yOffset=t.rowIndex),t.rowIndex>=i&&(n.yOffset=t.rowIndex-n.rows+2),n)}var Z=n(12),ee=n(45),te=n(66),ne=n(44),re=Object(te.a)((function(e,t){return e.pipe(Object(ee.a)(f),Object(ne.a)((function(e){var n=e.payload.width,r=e.payload.height,o=e.payload.text,a=e.payload.cellWidth||t.value.cellWidth,i=e.payload.cellHeight||t.value.cellHeight,c=Math.floor(r/(i-1))+1,l=Math.floor(n/(a-1))+1,s=Object(u.a)({},t.value.viewport,{rows:c,cols:l});return[N({cellWidth:a,cellHeight:i,rows:c,cols:l,cells:o.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/).map((function(e){return e.split("")})),viewport:s})]})))}),(function(e,t){return e.pipe(Object(ee.a)(p),Object(ne.a)((function(e){var n=e.payload.mouseX,r=e.payload.mouseY,o=t.value.cellWidth-1,a=t.value.cellHeight-1,i=t.value.viewport,c=Math.floor(r/a)+i.yOffset,l=Math.floor(n/o)+i.xOffset,s={rowIndex:c,colIndex:l},u=[];return c===t.value.hover.rowIndex&&l===t.value.hover.colIndex||u.push(X(s)),t.value.selection.isMouseDown&&u.push(A()),u})))}),(function(e,t){return e.pipe(Object(ee.a)(w),Object(ne.a)((function(e){var n=e.payload.key,r=t.value.target.rowIndex,o=t.value.target.colIndex,a=e.payload.isShiftDown,i=e.payload.callback(t.value,n)||{},c=i.actions||[];if(i.preventDefault)return c;if(1===n.length)return[].concat(Object(Z.a)(c),[Y({rowIndex:r,colIndex:o,value:n}),U()]);if("Tab"===n){var l=a?-1:1;return[].concat(Object(Z.a)(c),[U(l,0)])}if("Enter"===n){var s=a?-1:1;return[].concat(Object(Z.a)(c),[U(0,s)])}if("Backspace"===n)return[].concat(Object(Z.a)(c),[q(),Y({value:""}),U(void 0,void 0,!0)]);if("Delete"===n)return[].concat(Object(Z.a)(c),[q(),Y({rowIndex:r,colIndex:o,value:""})]);if(n.includes("Arrow")){var d={x:0,y:0};switch(n){case"ArrowLeft":d.x=-1;break;case"ArrowRight":d.x=1;break;case"ArrowUp":d.y=-1;break;case"ArrowDown":d.y=1}if(a){var f=Object(u.a)({},t.value.selection);return f.endColIndex+=d.x,f.endRowIndex+=d.y,[].concat(Object(Z.a)(c),[V(f),$(d.x,d.y)])}return[].concat(Object(Z.a)(c),[U(d.x,d.y),$(d.x,d.y)])}return[]})))})),oe=n(16),ae=n(65),ie=Object(ae.a)(),ce=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||oe.c,le=Object(oe.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(u.a)({},e,{},t.payload);case O:return Object(u.a)({},e,{hover:t.payload});case b:var n=t.payload.rowIndex?t.payload.rowIndex:e.target.rowIndex,r=t.payload.colIndex?t.payload.colIndex:e.target.colIndex,o=t.payload.value,a=e.cells;return function(e,t,n){for(;e.length<=n;)e.push([]);for(;e[n].length<=t;)e[n].push("")}(a,r,n),a[n][r]=o,Object(u.a)({},e,{cells:a});case m:var i=Object(u.a)({},e.target,{},t.payload),c=Object(u.a)({},e.selection,{startRowIndex:i.rowIndex,startColIndex:i.colIndex,endRowIndex:i.rowIndex,endColIndex:i.colIndex}),l=Q(e.viewport,i);return Object(u.a)({},e,{viewport:l,target:i,selection:c});case y:var s=t.payload.invert?-1:1,d=t.payload&&void 0!==t.payload.x?t.payload.x:e.target.dir.x,f=t.payload&&void 0!==t.payload.y?t.payload.y:e.target.dir.y,p=Object(u.a)({},e.target,{},function(e,t,n){var r=e.rowIndex+n,o=e.colIndex+t;return r=Math.max(r,0),o=Math.max(o,0),{rowIndex:r,colIndex:o}}(e.target,d*s,f*s)),w=Object(u.a)({},e.selection,{startRowIndex:p.rowIndex,startColIndex:p.colIndex,endRowIndex:p.rowIndex,endColIndex:p.colIndex}),S=Q(e.viewport,p);return Object(u.a)({},e,{viewport:S,target:p,selection:w});case C:var M=t.payload.rowIndex,N=e.cells;return N.splice(M,0,[]),Object(u.a)({},e,{cells:N});case E:for(var _=t.payload,G=_.rowIndex,L=_.colIndex,W=e.cells;W.length<=G;)W.push([]);for(;W[G].length<=L;)W[G].push("");return W[G].splice(L,0,""),Object(u.a)({},e,{cells:W});case k:var A=t.payload.rowIndex,H=e.cells;return H.splice(A,1),Object(u.a)({},e,{cells:H});case j:console.log(j);var X=t.payload,Y=X.rowIndex,P=X.colIndex,U=e.cells;return U.length<=Y?e:U[Y].length<=P?e:(U[Y].splice(P,1),Object(u.a)({},e,{cells:U}));case R:var V=Object(u.a)({},e.selection,{},t.payload),q=Object(u.a)({},e.target,{rowIndex:V.endRowIndex,colIndex:V.endColIndex});return Object(u.a)({},e,{selection:V,target:q});case T:for(var B=e.cells,F=Math.min(e.selection.startRowIndex,e.selection.endRowIndex),K=Math.max(e.selection.startRowIndex,e.selection.endRowIndex),J=Math.min(e.selection.startColIndex,e.selection.endColIndex),$=Math.max(e.selection.startColIndex,e.selection.endColIndex),Z=F;Z<=K&&Z<B.length;Z++)for(var ee=J;ee<=$&&ee<B[Z].length;ee++)B[Z][ee]="";return Object(u.a)({},e,{cells:B});case x:var te=Object(u.a)({},e.target,{rowIndex:e.hover.rowIndex,colIndex:e.hover.colIndex}),ne=Object(u.a)({},e.selection,{startColIndex:te.colIndex,startRowIndex:te.rowIndex,endColIndex:te.colIndex,endRowIndex:te.rowIndex,isDragging:!1,isMouseDown:!0});return Object(u.a)({},e,{target:te,selection:ne});case g:var re=Object(u.a)({},e.selection,{isDragging:!1,isMouseDown:!1});return Object(u.a)({},e,{selection:re});case v:var oe=t.payload,ae=oe.xOffset,ie=oe.yOffset,ce=Object(u.a)({},e.viewport,{xOffset:Math.floor(ae/e.cellWidth),yOffset:Math.floor(ie/e.cellHeight)});return Object(u.a)({},e,{viewport:ce});case I:if(e.selection.isDragging){var le=Object(u.a)({},e.selection);le.endRowIndex=e.hover.rowIndex,le.endColIndex=e.hover.colIndex,le.endColIndex+=le.endColIndex<le.startColIndex?0:1;var se=Object(u.a)({},e.target,{rowIndex:e.hover.rowIndex,colIndex:e.hover.colIndex});return Object(u.a)({},e,{selection:le,target:se})}var ue=Object(u.a)({},e.target,{rowIndex:e.hover.rowIndex,colIndex:e.hover.colIndex}),de=Object(u.a)({},e.selection,{isDragging:!0});return Object(u.a)({},e,{selection:de,target:ue});case D:var fe=Object(u.a)({},e.target);return fe.dir=Object(u.a)({},t.payload),Object(u.a)({},e,{target:fe});default:return e}}),ce(Object(oe.a)(ie)));ie.run(re);n(59);var se=Object(o.forwardRef)((function(e,t){Object(o.useImperativeHandle)(t,(function(){return{test:function(){return console.log("hello world")},getCells:function(){return le.getState().cells}}}),[]);var n=Object(l.b)(),r=Object(l.c)((function(e){return e.viewport.rows})),i=Object(l.c)((function(e){return e.viewport.xOffset})),c=Object(l.c)((function(e){return e.viewport.yOffset})),s=r>0?new Array(r).fill(""):[],u=Object(o.useRef)(null);Object(o.useEffect)((function(){var t=u.current?u.current.offsetWidth:0,r=u.current?u.current.offsetHeight:0;n(M(t,r,e.config.text,e.config.cellWidth,e.config.cellHeight))}),[e,n]);return u.current&&(u.current.scrollLeft=i*e.config.cellWidth,u.current.scrollTop=c*e.config.cellHeight),console.log("GRID RE-RENDERED"),a.a.createElement("div",{ref:u,className:"text-grid-area",onScroll:function(e){e.preventDefault(),n(W(e.target.scrollLeft,e.target.scrollTop))},draggable:!0,tabIndex:"0",onKeyDown:function(t){t.preventDefault(),n(H({key:t.key,isShiftDown:t.shiftKey,callback:e.config.events.onKeyDown}))},onMouseMove:function(e){var t=e.currentTarget.getBoundingClientRect(),r=e.clientX-t.left,o=e.clientY-t.top;n(_({mouseX:r,mouseY:o}))},onMouseUp:function(e){e.preventDefault(),n(L())},onMouseDown:function(e){e.preventDefault(),e.currentTarget.focus(),n(G())},onMouseLeave:function(e){n(X({rowIndex:-1,colIndex:-1}))}},a.a.createElement("div",{className:"text-grid"},s.map((function(e,t){return a.a.createElement(ue,{key:"gridRow-".concat(t),rowId:t+c})})),a.a.createElement(fe,null)),a.a.createElement("div",{style:{width:1e4,height:1e4,position:"absolute"}}))}));function ue(e){var t=e.rowId,n=Object(l.c)((function(e){return e.cellHeight})),r=Object(l.c)((function(e){return e.viewport.cols})),o=Object(l.c)((function(e){return e.viewport.xOffset})),i=r>0?new Array(r).fill(""):[];return console.log("ROW RE-RENDERED"),a.a.createElement("div",{className:"text-grid-row",style:{height:n,maxHeight:n,minHeight:n}},i.map((function(e,n){var r=n+o;return a.a.createElement(de,{key:"cell-"+t+"-"+r,rowId:t,colId:r})})))}function de(e){var t=e.rowId,n=e.colId,r=Object(l.c)((function(e){return t<e.cells.length&&n<e.cells[t].length?e.cells[t][n]:""})),o=Object(l.c)((function(e){return e.cellWidth})),i=Object(l.c)((function(e){return e.hover.rowIndex===t})),c=Object(l.c)((function(e){return e.hover.colIndex===n})),s=Object(l.c)((function(e){return e.target.rowIndex===t&&e.target.colIndex===n})),u=Object(l.c)((function(e){return s?e.target.dir.x:0})),d=Object(l.c)((function(e){return s?e.target.dir.y:0})),f=i&&c;return a.a.createElement("span",{className:function(){var e=["text-grid-cell"];return f&&e.push("cell-hover"),i&&e.push("row-hover"),c&&e.push("col-hover"),s&&e.push("active-override"),s&&u>0&&e.push("active-override-left"),s&&u<0&&e.push("active-override-right"),s&&d>0&&e.push("active-override-top"),s&&d<0&&e.push("active-override-bottom"),e.join(" ")}(),style:{width:o,maxWidth:o,minWidth:o}},a.a.createElement("div",{className:"text-grid-cell-content"},r))}function fe(){var e=Object(l.c)((function(e){return e.selection})),t=Object(l.c)((function(e){return e.cellWidth})),n=Object(l.c)((function(e){return e.cellHeight})),r=Object(l.c)((function(e){return e.viewport})),o=e.startColIndex-r.xOffset,i=e.endColIndex-r.xOffset,c=e.startRowIndex-r.yOffset,s=e.endRowIndex-r.yOffset;s<c&&(c+=1),i<o&&(o+=1);var u=(i-o)*(t-1),d=(s-c+1)*(n-1)+(s-c<0?-(n-1):0),f=o*(t-1)+Math.min(u,0),h=c*(n-1)+Math.min(d,0),p={width:Math.abs(u),height:Math.abs(d),left:f,top:h};return 0!==u&&0!==d||(p.display="none"),a.a.createElement("div",{className:"text-grid-selection",style:p})}function he(){var e=Object(l.c)((function(e){return e.viewport})),t=Object(l.c)((function(e){return e.target})),n=Object(l.c)((function(e){return e.selection}));return a.a.createElement("div",{className:"text-grid-status-bar"},a.a.createElement("ul",null,a.a.createElement("li",null,"R: ",e.rows),a.a.createElement("li",null,"C: ",e.cols),a.a.createElement("li",null,"SX: ",e.xOffset),a.a.createElement("li",null,"SY: ",e.yOffset),a.a.createElement("li",null,"TX: ",t.colIndex),a.a.createElement("li",null,"TY: ",t.rowIndex),a.a.createElement("li",null,"SX: ",n.startColIndex),a.a.createElement("li",null,"SY: ",n.startRowIndex),a.a.createElement("li",null,"EX: ",n.endColIndex),a.a.createElement("li",null,"EY: ",n.endRowIndex),a.a.createElement("li",null,"dragging: ",n.isDragging?"true":"false"),a.a.createElement("li",null,"mouseDown: ",n.isMouseDown?"true":"false")))}var pe=n(40),xe=(n(60),Object(o.forwardRef)((function(e,t){var n=Object(o.useState)(1),r=Object(s.a)(n,2),i=r[0],c=r[1],l=Object(o.useState)(""),d=Object(s.a)(l,2),f=d[0],h=d[1],p=Object(u.a)({clear:function(e){I()},echo:function(e){g(e.join(" "))}},e.commands),x=function(t){if(!e.onEnter||!e.onEnter(t)){var n=t.split(" ");if(0!==n.length){var r=Object(pe.a)(n),o=r[0],a=r.slice(1);void 0!==p[o]&&p[o](a)}}},g=function(e){h(f+"\n "+e),f+="\n"+e},v=!1,I=function(){h("> "),f="> ",c(2),i=2,v=!0};return Object(o.useEffect)((function(){h("> "),c(2)}),[]),Object(o.useImperativeHandle)(t,(function(){return{print:function(e){h(f+e),c((f+e).length)},submitInput:function(){x(""),h(f+"\n> "),c((f+="\n> ").length)}}}),[x,f]),a.a.createElement("div",{className:"terminal",style:{maxHeight:200,height:200,display:"flex",border:e.disabled?"10px solid red":S}},a.a.createElement("textarea",{wrap:"off",spellCheck:"false",value:f,onChange:function(e){h(e.target.value)},onKeyDown:function(e){1===e.key.length||("Enter"===e.key?(x(f.substr(i)),!1===v&&(h(f+"\n> "),c((f+="\n> ").length)),v=!1,e.preventDefault()):"Backspace"===e.key?e.target.selectionStart<=i&&e.preventDefault():"Delete"===e.key&&e.target.selectionStart<i&&e.preventDefault())},onSelect:function(e){e.target.selectionStart===i-1?e.target.setSelectionRange(i,i):e.target.selectionStart<i-1&&e.target.setSelectionRange(e.target.value.length,e.target.value.length)}}))})));n(61);function ge(e){var t=e.items||[];return a.a.createElement("div",{className:"toolbar"},a.a.createElement("ul",null,t.map((function(e,t){return a.a.createElement("li",{key:"tbitem-"+t,className:e.classNames,onClick:e.onClick},e.text)}))))}var ve=n(41),Ie=n(42),we=function(){function e(t){Object(ve.a)(this,e),this.program=t,this.numRows=this.program.length,this.numCols=Math.max(this.program.map((function(e){return e.length}))),this.stack=[],this.onInstructionExecutedCb=null,this.onConsoleOutCb=null,this.onProgramTerminateCb=null,this.onRequestConsoleInputCb=null,this.onStackChangeCb=null,this.currentInstruction=null,this.nextInstruction=Object(u.a)({x:0,y:0,i:t[0][0]},this.getInstructionDir(1,0,t[0][0])),this.stringMode=!1,this.waitingForInput=!1,this.inputStack=[]}return Object(Ie.a)(e,[{key:"step",value:function(){if(!this.waitingForInput){this.currentInstruction=this.nextInstruction;var e=this.currentInstruction;if(null!==e){if(this.stringMode)'"'===e.i?this.stringMode=!1:this.stack.push(e.i.charCodeAt(0));else if(e.i.includes([">","<","v","^","?"]));else if(e.i>="0"&&e.i<="9")this.stack.push(parseInt(e.i));else if("+"===e.i){var t=this.stack.pop(),n=this.stack.pop();this.stack.push(t+n)}else if("-"===e.i){var r=this.stack.pop(),o=this.stack.pop();this.stack.push(o-r)}else if("*"===e.i){var a=this.stack.pop(),i=this.stack.pop();this.stack.push(a*i)}else if("/"===e.i){var c=this.stack.pop(),l=this.stack.pop();this.stack.push(l/c)}else if("%"===e.i){var s=this.stack.pop(),u=this.stack.pop();this.stack.push(u%s)}else if("!"===e.i){var d=this.stack.pop();this.stack.push(0===d?1:0)}else if("`"===e.i){var f=this.stack.pop(),h=this.stack.pop();this.stack.push(h>f?1:0)}else if("_"===e.i)this.stack.pop();else if("|"===e.i)this.stack.pop();else if('"'===e.i)this.stringMode=!this.stringMode;else if(":"===e.i)this.stack.push(this.stack[this.stack.length-1]);else if("\\"===e.i){var p=this.stack.pop(),x=this.stack.pop();this.stack.push(p),this.stack.push(x)}else if("$"===e.i)this.stack.pop();else if("."===e.i){var g=this.stack.pop();this.onConsoleOutCb(g)}else if(","===e.i){var v=this.stack.pop();this.onConsoleOutCb(String.fromCharCode(v))}else if("#"===e.i)e.dirX*=2,e.dirY*=2;else if("p"===e.i){var I=this.stack.pop(),w=this.stack.pop(),O=this.stack.pop(),b=String.fromCharCode(O);this.program[I][w]=b}else if("g"===e.i){var m=this.stack.pop(),y=this.stack.pop(),C=this.program[m][y];this.stack.push(C)}else if("&"===e.i){if(0===this.inputStack.length)return this.waitingForInput=!0,void(this.onRequestConsoleInputCb&&this.onRequestConsoleInputCb());var E=this.inputStack.shift();this.stack.push(parseInt(E))}else if("~"===e.i){if(0===this.inputStack.length)return this.waitingForInput=!0,void(this.onRequestConsoleInputCb&&this.onRequestConsoleInputCb());var k=this.inputStack.shift();this.stack.push(k.charCodeAt(0))}else"@"===e.i&&(e.dirX=0,e.dirY=0,this.onProgramTerminateCb&&this.onProgramTerminateCb());this.onStackChangeCb&&this.onStackChangeCb();var j=this.getNextInstruction();this.nextInstruction=j,this.onInstructionExecutedCb&&this.onInstructionExecutedCb(e,j)}}}},{key:"getNextInstruction",value:function(){var e=this.currentInstruction,t=e.x+e.dirX,n=e.y+e.dirY;n<0&&(n=this.numRows-1),t<0&&(t=this.numCols-1),n>=this.numRows&&(n=0),t>=this.numCols&&(t=0);var r=t<this.program[n].length?this.program[n][t]:"",o=this.getInstructionDir(e.dirX,e.dirY,r);return Object(u.a)({x:t,y:n,i:r},o)}},{key:"getInstructionDir",value:function(e,t,n){var r=e,o=t;switch(n){case">":r=1,o=0;break;case"<":r=-1,o=0;break;case"^":r=0,o=-1;break;case"v":r=0,o=1;break;case"?":var a=Math.floor(4*Math.random());0===a&&(r=1,o=0),1===a&&(r=0,o=1),2===a&&(r=-1,o=0),3===a&&(r=0,o=-1);break;case"_":o=0,r=0===this.stack[this.stack.length-1]?1:-1;break;case"|":o=0===this.stack[this.stack.length-1]?1:-1,r=0}return{dirX:r,dirY:o}}},{key:"input",value:function(e){this.inputStack.push(e),this.waitingForInput=!1}},{key:"onInstructionExecuted",value:function(e){this.onInstructionExecutedCb=e}},{key:"onConsoleOut",value:function(e){this.onConsoleOutCb=e}},{key:"onRequestConsoleInput",value:function(e){this.onRequestConsoleInputCb=e}},{key:"onProgramTerminate",value:function(e){this.onProgramTerminateCb=e}},{key:"onStackChange",value:function(e){this.onStackChangeCb=e}}]),e}(),Oe=(n(62),null),be=Object(o.forwardRef)((function(e,t){var n=Object(o.useState)(null),i=Object(s.a)(n,2),c=i[0],l=i[1],u=Object(o.useState)([]),d=Object(s.a)(u,2),f=d[0],h=d[1],p=[];try{p=JSON.parse(f)}catch(y){}var x=function(){var e=O.current.getCells(),t=new we(e);t.onInstructionExecuted((function(e,t){null!==t&&(le.dispatch(r.setTargetCell(t.y,t.x)),le.dispatch(r.setTypeingDir(t.dirX,t.dirY)))})),t.onStackChange((function(){h(JSON.stringify(c.stack,4))})),t.onConsoleOut((function(e){b.current.print(e)})),t.onProgramTerminate((function(){clearInterval(Oe),Oe=null,l(null),b.current.print("\nProgram Terminated!\n"),b.current.submitInput()})),t.onRequestConsoleInput((function(){var e=window.prompt("Enter a value","");c&&c.waitingForInput&&e&&c.input(e)})),c=t,l(t),le.dispatch(r.setTargetCell(0,0)),le.dispatch(r.setTypeingDir(1,0))},g=function(){x(),Oe=setInterval((function(){v()}),50)},v=function(){c.step()},I={"set-cursor-pos":function(e){var t,n;t=parseInt(e[0]),n=parseInt(e[1]),le.dispatch(r.setTargetCell(t,n))},"set-cursor-dir":function(e){var t,n;t=parseInt(e[0]),n=parseInt(e[1]),le.dispatch(r.setTypeingDir(t,n))},run:function(e){g()},next:function(e){v()},stack:function(e){console.log(c.stack)}},w={cellWidth:32,cellHeight:32,text:'>              v\nv  ,,,,,"Hello"<\n>48*,          v\nv,,,,,,"World!"<\n>25*,@',events:{onKeyDown:function(e,t){return"v"===t?{preventDefault:!1,actions:[r.setTypeingDir(0,1)]}:">"===t?{preventDefault:!1,actions:[r.setTypeingDir(1,0)]}:"<"===t?{preventDefault:!1,actions:[r.setTypeingDir(-1,0)]}:"^"===t?{preventDefault:!1,actions:[r.setTypeingDir(0,-1)]}:{}}},terminalCommands:I},O=Object(o.useRef)(),b=Object(o.useRef)(),m=[];return null===c?(m.push({text:"Run",classNames:"button",onClick:function(){return g()}}),m.push({text:"Debug",classNames:"button",onClick:function(){x()}})):(m.push({text:"Stop",classNames:"button",onClick:function(){return l(null)}}),m.push({text:"Step",classNames:"button",onClick:function(){return v()}})),a.a.createElement("div",{className:"befungeIde"},a.a.createElement("div",{className:"main"},a.a.createElement(ge,{items:m}),a.a.createElement(se,{ref:O,config:w}),a.a.createElement(xe,{ref:b,commands:I,onEnter:function(e){c&&c.waitingForInput&&c.input(e)}}),a.a.createElement(he,null)),a.a.createElement("div",{className:"asside"},a.a.createElement("div",{className:"asside-header"},"Stack"),a.a.createElement("div",{className:"asside-section"},a.a.createElement("ul",{class:"befunge-stack-view"},p.reverse().map((function(e){return a.a.createElement("li",null,a.a.createElement("span",{style:{float:"left"}},e),a.a.createElement("span",{style:{float:"right"}},String.fromCharCode(e)))}))))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement((function(){return a.a.createElement(l.a,{store:le},a.a.createElement("div",{className:"App",style:{width:"calc(100%)",height:"calc(100% )",overflow:"hidden"}},a.a.createElement(be,null)))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[47,1,2]]]);
//# sourceMappingURL=main.c04e70ef.chunk.js.map